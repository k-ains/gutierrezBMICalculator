<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="BMICalculator.MainPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml">

    <ContentPage.Resources>
        <Style TargetType="Entry" x:Key="TransparentEntry">
            <Setter Property="TextColor" Value="White" />
            <Setter Property="BackgroundColor" Value="Transparent" />
            <Setter Property="VisualStateManager.VisualStateGroups">
                <VisualStateGroupList>
                    <VisualStateGroup x:Name="CommonStates">
                        <VisualState x:Name="Normal">
                            <VisualState.Setters>
                                <Setter Property="BackgroundColor" Value="Transparent" />
                            </VisualState.Setters>
                        </VisualState>
                        <VisualState x:Name="Focused">
                            <VisualState.Setters>
                                <Setter Property="BackgroundColor" Value="Transparent" />
                            </VisualState.Setters>
                        </VisualState>
                    </VisualStateGroup>
                </VisualStateGroupList>
            </Setter>
        </Style>
    </ContentPage.Resources>

    <Grid>
        <BoxView x:Name="BackgroundView"/>

        <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="12">

            <Label Text="BMI Calculator"
                   FontSize="28"
                   FontAttributes="Bold"
                   TextColor="White"
                   HorizontalOptions="Center"/>

            <Grid x:Name="GenderGrid" ColumnDefinitions="*,*" ColumnSpacing="8">
                <Border x:Name="GenderHighlight"
                        StrokeShape="RoundRectangle 10"
                        BackgroundColor="#FFFFFFCC"
                        Stroke="Transparent"
                        InputTransparent="True"
                        HeightRequest="40"/>
                <Button x:Name="GenderMaleBtn" Text="♂  Male" Clicked="GenderSelected"
                        BackgroundColor="Transparent" TextColor="#333333"
                        FontSize="14" FontAttributes="Bold"
                        HeightRequest="40" CornerRadius="10" Padding="0"/>
                <Button x:Name="GenderFemaleBtn" Text="♀  Female" Grid.Column="1" Clicked="GenderSelected"
                        BackgroundColor="Transparent" TextColor="White"
                        FontSize="14" FontAttributes="Bold"
                        HeightRequest="40" CornerRadius="10" Padding="0"/>
            </Grid>

            <!-- HEIGHT + WEIGHT SIDE BY SIDE -->
            <Grid ColumnDefinitions="*,*" ColumnSpacing="10">

                <!-- HEIGHT -->
                <Border StrokeShape="RoundRectangle 18"
                        BackgroundColor="Transparent"
                        Stroke="#FFFFFF60"
                        Padding="12">

                    <VerticalStackLayout Spacing="8">
                        <Label Text="Height"
                               FontSize="12"
                               TextColor="#FFFFFFCC"/>

                        <Border StrokeShape="RoundRectangle 8"
                                BackgroundColor="#00000060"
                                Stroke="Transparent"
                                InputTransparent="True">
                            <Entry x:Name="HeightEntry"
                                   Style="{StaticResource TransparentEntry}"
                                   Keyboard="Numeric"
                                   Placeholder="170"
                                   PlaceholderColor="#FFFFFF80"
                                   HorizontalTextAlignment="Center"
                                   FontSize="24"
                                   FontAttributes="Bold"
                                   TextColor="White"
                                   BackgroundColor="Transparent"/>
                        </Border>

                        <Grid x:Name="HeightUnitGrid" ColumnDefinitions="*,*,*,*" ColumnSpacing="4">
                            <Border x:Name="HeightUnitHighlight"
                                    StrokeShape="RoundRectangle 8"
                                    BackgroundColor="#FFFFFFCC"
                                    Stroke="Transparent"
                                    InputTransparent="True"
                                    HeightRequest="28"/>
                            <Button x:Name="HUnitCm" Text="cm" Clicked="HeightUnitSelected"
                                    BackgroundColor="Transparent" TextColor="#333333"
                                    FontSize="11" HeightRequest="28" CornerRadius="8" Padding="0"/>
                            <Button x:Name="HUnitM" Text="m" Grid.Column="1" Clicked="HeightUnitSelected"
                                    BackgroundColor="Transparent" TextColor="White"
                                    FontSize="11" HeightRequest="28" CornerRadius="8" Padding="0"/>
                            <Button x:Name="HUnitFt" Text="ft" Grid.Column="2" Clicked="HeightUnitSelected"
                                    BackgroundColor="Transparent" TextColor="White"
                                    FontSize="11" HeightRequest="28" CornerRadius="8" Padding="0"/>
                            <Button x:Name="HUnitIn" Text="in" Grid.Column="3" Clicked="HeightUnitSelected"
                                    BackgroundColor="Transparent" TextColor="White"
                                    FontSize="11" HeightRequest="28" CornerRadius="8" Padding="0"/>
                        </Grid>

                        <Grid ColumnDefinitions="*,*" ColumnSpacing="8">
                            <Button Text="−"
                                    Clicked="HeightDown"
                                    BackgroundColor="#00000040"
                                    TextColor="White"
                                    FontSize="26"
                                    FontAttributes="Bold"
                                    HeightRequest="40"
                                    CornerRadius="8"
                                    Padding="0"/>

                            <Button Text="+"
                                    Grid.Column="1"
                                    Clicked="HeightUp"
                                    BackgroundColor="#00000040"
                                    TextColor="White"
                                    FontSize="26"
                                    FontAttributes="Bold"
                                    HeightRequest="40"
                                    CornerRadius="8"
                                    Padding="0"/>
                        </Grid>
                    </VerticalStackLayout>
                </Border>

                <!-- WEIGHT -->
                <Border Grid.Column="1"
                        StrokeShape="RoundRectangle 18"
                        BackgroundColor="Transparent"
                        Stroke="#FFFFFF60"
                        Padding="12">

                    <VerticalStackLayout Spacing="8">
                        <Label Text="Weight"
                               FontSize="12"
                               TextColor="#FFFFFFCC"/>

                        <Border StrokeShape="RoundRectangle 8"
                                BackgroundColor="#00000060"
                                Stroke="Transparent"
                                InputTransparent="True">
                            <Entry x:Name="WeightEntry"
                                   Style="{StaticResource TransparentEntry}"
                                   Keyboard="Numeric"
                                   Placeholder="65"
                                   PlaceholderColor="#FFFFFF80"
                                   HorizontalTextAlignment="Center"
                                   FontSize="24"
                                   FontAttributes="Bold"
                                   TextColor="White"
                                   BackgroundColor="Transparent"/>
                        </Border>

                        <Grid x:Name="WeightUnitGrid" ColumnDefinitions="*,*" ColumnSpacing="4">
                            <Border x:Name="WeightUnitHighlight"
                                    StrokeShape="RoundRectangle 8"
                                    BackgroundColor="#FFFFFFCC"
                                    Stroke="Transparent"
                                    InputTransparent="True"
                                    HeightRequest="28"/>
                            <Button x:Name="WUnitKg" Text="kg" Clicked="WeightUnitSelected"
                                    BackgroundColor="Transparent" TextColor="#333333"
                                    FontSize="11" HeightRequest="28" CornerRadius="8" Padding="0"/>
                            <Button x:Name="WUnitLbs" Text="lbs" Grid.Column="1" Clicked="WeightUnitSelected"
                                    BackgroundColor="Transparent" TextColor="White"
                                    FontSize="11" HeightRequest="28" CornerRadius="8" Padding="0"/>
                        </Grid>

                        <Grid ColumnDefinitions="*,*" ColumnSpacing="8">
                            <Button Text="−"
                                    Clicked="WeightDown"
                                    BackgroundColor="#00000040"
                                    TextColor="White"
                                    FontSize="26"
                                    FontAttributes="Bold"
                                    HeightRequest="40"
                                    CornerRadius="8"
                                    Padding="0"/>

                            <Button Text="+"
                                    Grid.Column="1"
                                    Clicked="WeightUp"
                                    BackgroundColor="#00000040"
                                    TextColor="White"
                                    FontSize="26"
                                    FontAttributes="Bold"
                                    HeightRequest="40"
                                    CornerRadius="8"
                                    Padding="0"/>
                        </Grid>
                    </VerticalStackLayout>
                </Border>
            </Grid>

            <!-- BMI RESULT (image behind text) -->
            <Grid HorizontalOptions="Center"
                  HeightRequest="280"
                  IsClippedToBounds="True">
                <Image x:Name="ResultImage"
                       HeightRequest="360"
                       Margin="0,-63,0,0"
                       HorizontalOptions="Center"
                       VerticalOptions="Start"
                       Opacity="1"
                       Aspect="AspectFit"/>

                <VerticalStackLayout VerticalOptions="Center"
                                     HorizontalOptions="Center"
                                     Spacing="4">
                    <Border StrokeShape="RoundRectangle 16"
                            BackgroundColor="#00000050"
                            Padding="11"
                            HorizontalOptions="Center">
                        <Label x:Name="BmiLabel"
                               FontSize="48"
                               FontAttributes="Bold"
                               TextColor="White"
                               HorizontalOptions="Center"/>
                    </Border>

                    <Label x:Name="CategoryLabel"
                           TextColor="White"
                           FontSize="18"
                           FontAttributes="Bold"
                           HorizontalOptions="Center"/>
                </VerticalStackLayout>
            </Grid>

            <!-- BMI FORMULA -->
            <Border StrokeShape="RoundRectangle 16"
                    BackgroundColor="#00000030"
                    Stroke="#FFFFFF30"
                    Padding="16"
                    Margin="0,8,0,0">
                <VerticalStackLayout Spacing="8">
                    <Label Text="How is BMI calculated?"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="White"/>
                    <Label Text="BMI = weight (kg) ÷ height (m)²"
                           FontSize="14"
                           FontAttributes="Italic"
                           TextColor="#FFFFFFDD"
                           HorizontalOptions="Center"/>
                    <Label TextColor="#FFFFFFAA"
                           FontSize="12"
                           LineBreakMode="WordWrap">
                        <Label.FormattedText>
                            <FormattedString>
                                <Span Text="Body Mass Index (BMI) is calculated by dividing your weight in kilograms by your height in meters squared. It is a simple screening tool used to estimate whether a person is underweight, normal weight, overweight, or obese."/>
                            </FormattedString>
                        </Label.FormattedText>
                    </Label>
                </VerticalStackLayout>
            </Border>

            <!-- BMI CATEGORIES TABLE -->
            <Border StrokeShape="RoundRectangle 16"
                    BackgroundColor="#00000030"
                    Stroke="#FFFFFF30"
                    Padding="16">
                <VerticalStackLayout Spacing="6">
                    <Label Text="BMI Categories"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="White"
                           Margin="0,0,0,4"/>

                    <!-- Header -->
                    <Grid ColumnDefinitions="*,Auto" Padding="0,0,0,4">
                        <Label Text="Category"
                               FontSize="13"
                               FontAttributes="Bold"
                               TextColor="#FFFFFFAA"/>
                        <Label Text="BMI Range"
                               Grid.Column="1"
                               FontSize="13"
                               FontAttributes="Bold"
                               TextColor="#FFFFFFAA"/>
                    </Grid>

                    <BoxView HeightRequest="1" BackgroundColor="#FFFFFF30"/>

                    <!-- Underweight -->
                    <Grid ColumnDefinitions="*,Auto" Padding="4,6">
                        <HorizontalStackLayout Spacing="8">
                            <BoxView WidthRequest="12" HeightRequest="12"
                                     CornerRadius="6"
                                     BackgroundColor="#00D2FF"
                                     VerticalOptions="Center"/>
                            <Label Text="Underweight"
                                   FontSize="13" TextColor="White"
                                   VerticalOptions="Center"/>
                        </HorizontalStackLayout>
                        <Label Text="&lt; 18.5"
                               Grid.Column="1"
                               FontSize="13" TextColor="#FFFFFFCC"
                               VerticalOptions="Center"/>
                    </Grid>

                    <BoxView HeightRequest="1" BackgroundColor="#FFFFFF15"/>

                    <!-- Normal -->
                    <Grid ColumnDefinitions="*,Auto" Padding="4,6">
                        <HorizontalStackLayout Spacing="8">
                            <BoxView WidthRequest="12" HeightRequest="12"
                                     CornerRadius="6"
                                     BackgroundColor="#38EF7D"
                                     VerticalOptions="Center"/>
                            <Label Text="Normal"
                                   FontSize="13" TextColor="White"
                                   VerticalOptions="Center"/>
                        </HorizontalStackLayout>
                        <Label Text="18.5 – 24.9"
                               Grid.Column="1"
                               FontSize="13" TextColor="#FFFFFFCC"
                               VerticalOptions="Center"/>
                    </Grid>

                    <BoxView HeightRequest="1" BackgroundColor="#FFFFFF15"/>

                    <!-- Overweight -->
                    <Grid ColumnDefinitions="*,Auto" Padding="4,6">
                        <HorizontalStackLayout Spacing="8">
                            <BoxView WidthRequest="12" HeightRequest="12"
                                     CornerRadius="6"
                                     BackgroundColor="#FF8C42"
                                     VerticalOptions="Center"/>
                            <Label Text="Overweight"
                                   FontSize="13" TextColor="White"
                                   VerticalOptions="Center"/>
                        </HorizontalStackLayout>
                        <Label Text="25.0 – 29.9"
                               Grid.Column="1"
                               FontSize="13" TextColor="#FFFFFFCC"
                               VerticalOptions="Center"/>
                    </Grid>

                    <BoxView HeightRequest="1" BackgroundColor="#FFFFFF15"/>

                    <!-- Obese -->
                    <Grid ColumnDefinitions="*,Auto" Padding="4,6">
                        <HorizontalStackLayout Spacing="8">
                            <BoxView WidthRequest="12" HeightRequest="12"
                                     CornerRadius="6"
                                     BackgroundColor="#F46B45"
                                     VerticalOptions="Center"/>
                            <Label Text="Obese"
                                   FontSize="13" TextColor="White"
                                   VerticalOptions="Center"/>
                        </HorizontalStackLayout>
                        <Label Text="30.0 – 39.9"
                               Grid.Column="1"
                               FontSize="13" TextColor="#FFFFFFCC"
                               VerticalOptions="Center"/>
                    </Grid>

                    <BoxView HeightRequest="1" BackgroundColor="#FFFFFF15"/>

                    <!-- Morbidly Obese -->
                    <Grid ColumnDefinitions="*,Auto" Padding="4,6">
                        <HorizontalStackLayout Spacing="8">
                            <BoxView WidthRequest="12" HeightRequest="12"
                                     CornerRadius="6"
                                     BackgroundColor="#EF473A"
                                     VerticalOptions="Center"/>
                            <Label Text="Morbidly Obese"
                                   FontSize="13" TextColor="White"
                                   VerticalOptions="Center"/>
                        </HorizontalStackLayout>
                        <Label Text="40.0 +"
                               Grid.Column="1"
                               FontSize="13" TextColor="#FFFFFFCC"
                               VerticalOptions="Center"/>
                    </Grid>
                </VerticalStackLayout>
            </Border>

        </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>